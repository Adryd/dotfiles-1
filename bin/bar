#!/bin/bash

# kill polybar, wait for death, relaunch
killall -q polybar
while pgrep -u $UID -x polybar >/dev/null; do sleep 1; done
(nohup polybar -r operator >/dev/null 2>&1 &)

# calc appropriate top padding
gap=$(bspc config window_gap)
bar_height=$(cat ~/.config/polybar/config | grep height | cut -d' ' -f3)
padding=$(($gap + $bar_height))
bspc config top_padding $padding
